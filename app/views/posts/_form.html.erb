<%= form_with(model: post, local: true) do |form| %>
  <div class="form-group">
    <%= form.label :event_name, class: "form-label" %>
    <%= form.text_field :event_name, class: "form-input" %>
    <% if post.errors.include?(:event_name) %>
      <p class="error-message">
        <%= post.errors.full_messages_for(:event_name).join(", ") %>
      </p>
    <% end %>
  </div>

  <div class="form-group">
    <%= form.label :time, class: "form-label" %>
    <%= form.time_field :time, class: "form-input" %>
  </div>

  <div class="form-group">
    <%= form.label :event_date, class: "form-label" %>
    <%= form.date_field :event_date, class: "form-input" %>
  </div>

  <div class="form-group">
    <%= form.label :membership_required, class: "form-label" %>
    <%= form.check_box :membership_required, class: "form-checkbox", checked: @post.membership_required.nil? || @post.membership_required == "1" %>
  </div>

  <div class="form-group">
    <%= form.label :visibility, "Visible?", class: "form-label" %>
    <%= form.check_box :visibility, class: "form-checkbox" %>
  </div>

  <div class="form-group">
    <%= form.label :suggested_donation, class: "form-label" %>
    <%= form.text_field :suggested_donation, class: "form-input" %>
  </div>
  
    <div class="form-group">
      <%= form.label :genre, "Genre", class: "form-label" %>
      <%= form.select :genre, options_for_select([*@genres], selected: @selectElement), { multiple: true }, { class: "form-select", id: "selectElement", genre: { controller: "slim-select" } } %>
    </div>

  <%= form_with(model: post, local: true) do |form| %>
    <div class="form-group">
      <%= form.label :bands, "Bands", class: "form-label" %>
      <%= form.select :band_ids, options_for_select(@bands.collect { |band| [band.band_name, band.id] }, selected: post.band_ids), { multiple: true }, { class: "form-select", id: "band_select" } %>
    </div>

    <div class="form-group">
      <%= form.submit "Submit", class: "form-submit" %>
    </div>
  <% end %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.26.0/slimselect.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.26.0/slimselect.min.css">

<script>
  document.addEventListener("DOMContentLoaded", function() {
    new SlimSelect({
      select: '#band_select', // Targeting the select element
      closeOnSelect: false // Allows multiple selection
    });
  });
</script>


  <div class="form-group">
    <%= form.label :image, class: "form-label" %>
    <%= form.file_field :image, class: "form-input" %>
  </div>

  <div class="form-group">
    <%= form.label :show_poster, "Upload Show Poster", class: "form-label" %>
    <%= form.file_field :show_poster, class: "form-input" %>
  </div>

  <div class="form-group">
    <%= form.submit "Submit", class: "form-submit" %>
  </div>
<% end %>
